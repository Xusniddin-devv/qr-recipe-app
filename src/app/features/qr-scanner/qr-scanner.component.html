@if(streamActive){<ng-container>
  <div
    class="fixed inset-0 w-screen h-screen bg-black overflow-hidden block z-40 md:relative md:inset-auto md:w-full md:max-w-xl lg:max-w-2xl md:aspect-[16/9] md:mx-auto md:my-4 md:rounded-lg md:z-auto"
  >
    <video
      #video
      class="w-full h-full object-cover block"
      playsinline
      muted
    ></video>
    <canvas #canvas class="hidden"></canvas>
    <div
      class="absolute w-6 h-6 border-4 border-white top-[35%] left-[25%] border-r-0 border-b-0"
    ></div>
    <div
      class="absolute w-6 h-6 border-4 border-white top-[35%] right-[25%] border-l-0 border-b-0"
    ></div>
    <div
      class="absolute w-6 h-6 border-4 border-white bottom-[35%] left-[25%] border-r-0 border-t-0"
    ></div>
    <div
      class="absolute w-6 h-6 border-4 border-white bottom-[35%] right-[25%] border-l-0 border-t-0"
    ></div>
    @if(showStatus){
    <div
      class="absolute bottom-20 left-1/2 -translate-x-1/2 z-50 p-2.5 text-center font-bold transition-all duration-300 ease-in-out border-2 border-transparent rounded-md w-auto max-w-[80%]"
      [ngClass]="{
        'bg-[#4CAF50] text-white border-[#388E3C] animate-pulse':
          decodedUrl !== null && !hasError,
        'bg-red-500 text-white border-red-700': hasError
      }"
    >
      {{ status }}
    </div>
    }

    <button
      class="absolute bottom-16 left-1/2 -translate-x-1/2 bg-black/50 border-none p-3 rounded-full text-2xl text-white cursor-pointer z-50"
      (click)="toggleTorch()"
    >
      <span [class]="torchOn ? 'text-[gold]' : ''">ðŸ”¦</span>
    </button>
  </div> </ng-container
>} @else {
<div
  class="fixed inset-0 flex items-center justify-center z-30 pointer-events-none"
>
  <button
    class="w-20 h-20 bg-[#1c7ab0] hover:bg-[#186a9a] active:bg-[#145a85] text-white border-none rounded-full cursor-pointer text-sm flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200 ease-in-out transform hover:scale-105 active:scale-95 pointer-events-auto"
    (click)="startScanner()"
    aria-label="Start Camera"
  >
    <span>Start</span>
  </button>
</div>
}
