<div class="suggestions-container p-4">
  <div class="mb-6">
    <div
      class="grid grid-cols-3 gap-1 bg-slate-800 rounded-xl p-1 shadow-md max-w-md mx-auto"
    >
      <button
        (click)="setActiveTab('receipt')"
        class="flex flex-col items-center justify-center py-2.5 px-2 rounded-lg transition-all duration-300 ease-in-out"
        [class]="
          activeSuggestionTab === 'receipt'
            ? 'bg-blue-500 text-white shadow-lg'
            : 'text-slate-400 hover:bg-slate-700/50 hover:text-white'
        "
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
          />
        </svg>
        <span class="text-sm font-medium mt-1">Receipt</span>
      </button>

      <button
        (click)="setActiveTab('health')"
        class="flex flex-col items-center justify-center py-2.5 px-2 rounded-lg transition-all duration-300 ease-in-out disabled:opacity-50"
        [class]="
          activeSuggestionTab === 'health'
            ? 'bg-green-500 text-white shadow-lg'
            : 'text-slate-400 hover:bg-slate-700/50 hover:text-white'
        "
        [disabled]="
          (isLoadingAiSuggestions$ | async) ||
          !(hasProductsForSuggestions$ | async)
        "
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
          />
        </svg>
        <span class="text-sm font-medium mt-1">Health</span>
      </button>

      <button
        (click)="setActiveTab('saving')"
        class="flex flex-col items-center justify-center py-2.5 px-2 rounded-lg transition-all duration-300 ease-in-out disabled:opacity-50"
        [class]="
          activeSuggestionTab === 'saving'
            ? 'bg-orange-500 text-white shadow-lg'
            : 'text-slate-400 hover:bg-slate-700/50 hover:text-white'
        "
        [disabled]="
          (isLoadingAiSuggestions$ | async) ||
          !(hasProductsForSuggestions$ | async)
        "
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          />
        </svg>
        <span class="text-sm font-medium mt-1">Saving</span>
      </button>
    </div>
  </div>

  <div class="suggestion-content">
    @if (activeSuggestionTab === 'receipt') {
    <app-receipt-summary
      [summary]="paymentSummary$ | async"
      (scanClicked)="navigateToScan()"
    >
    </app-receipt-summary>
    <app-receipt-history></app-receipt-history>
    } @if (activeSuggestionTab === 'health') {
    <app-health-suggestions
      [suggestions]="aiSuggestions$ | async"
      [isLoading]="isLoadingAiSuggestions$ | async"
      [hasProducts]="hasProductsForSuggestions$ | async"
      [error]="aiError$ | async"
    >
    </app-health-suggestions>
    } @if (activeSuggestionTab === 'saving') {
    <app-saving-suggestions
      [suggestions]="aiSuggestions$ | async"
      [isLoading]="isLoadingAiSuggestions$ | async"
      [hasProducts]="hasProductsForSuggestions$ | async"
      [error]="aiError$ | async"
    >
    </app-saving-suggestions>
    }
  </div>
</div>
