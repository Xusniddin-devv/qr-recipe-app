<div class="suggestions-container p-4">
  <!-- Mobile-First Tab Navigation -->
  <div class="mb-6">
    <div
      class="grid grid-cols-3 gap-1 bg-gray-100 rounded-xl p-1 shadow-sm max-w-md mx-auto"
    >
      <!-- Receipt Tab -->
      <button
        (click)="setActiveTab('receipt')"
        class="flex flex-col sm:flex-row items-center justify-center py-2.5 px-1 sm:px-3 rounded-lg transition-all"
        [class]="
          activeSuggestionTab === 'receipt'
            ? 'bg-white text-blue-600 shadow'
            : 'text-gray-600 hover:text-gray-700'
        "
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5 sm:mr-2"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
          />
        </svg>
        <span class="text-xs sm:text-sm font-medium mt-1 sm:mt-0">Receipt</span>
      </button>

      <!-- Health Tab -->
      <button
        (click)="setActiveTab('health')"
        class="flex flex-col sm:flex-row items-center justify-center py-2.5 px-1 sm:px-3 rounded-lg transition-all"
        [class]="
          activeSuggestionTab === 'health'
            ? 'bg-white text-green-600 shadow'
            : 'text-gray-600 hover:text-gray-700'
        "
        [disabled]="
          (isLoadingAiSuggestions$ | async) ||
          !(hasProductsForSuggestions$ | async)
        "
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5 sm:mr-2"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
          />
        </svg>
        <span class="text-xs sm:text-sm font-medium mt-1 sm:mt-0">Health</span>
      </button>

      <!-- Saving Tab -->
      <button
        (click)="setActiveTab('saving')"
        class="flex flex-col sm:flex-row items-center justify-center py-2.5 px-1 sm:px-3 rounded-lg transition-all"
        [class]="
          activeSuggestionTab === 'saving'
            ? 'bg-white text-orange-600 shadow'
            : 'text-gray-600 hover:text-gray-700'
        "
        [disabled]="
          (isLoadingAiSuggestions$ | async) ||
          !(hasProductsForSuggestions$ | async)
        "
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5 sm:mr-2"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          />
        </svg>
        <span class="text-xs sm:text-sm font-medium mt-1 sm:mt-0">Saving</span>
      </button>
    </div>
  </div>

  <!-- Content Area with Child Components -->
  <div class="suggestion-content">
    @if (activeSuggestionTab === 'receipt') {
    <app-receipt-summary
      [summary]="paymentSummary$ | async"
      (scanClicked)="navigateToScan()"
    >
    </app-receipt-summary>
    } @if (activeSuggestionTab === 'health') {
    <app-health-suggestions
      [suggestions]="aiSuggestions$ | async"
      [isLoading]="isLoadingAiSuggestions$ | async"
      [hasProducts]="hasProductsForSuggestions$ | async"
      [error]="aiError$ | async"
    >
    </app-health-suggestions>
    } @if (activeSuggestionTab === 'saving') {
    <app-saving-suggestions
      [suggestions]="aiSuggestions$ | async"
      [isLoading]="isLoadingAiSuggestions$ | async"
      [hasProducts]="hasProductsForSuggestions$ | async"
      [error]="aiError$ | async"
    >
    </app-saving-suggestions>
    }
  </div>
</div>
